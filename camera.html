<html>

<head>
  <script src="https://aframe.io/releases/0.3.2/aframe.min.js"></script>
  <script src="spectator.js"></script>
  <script src="js/follow.js"></script>
  <script src="https://rawgit.com/ngokevin/aframe-firebase-component/master/dist/aframe-firebase-component.min.js"></script>
  <script src="js/aframe-particle-system-component.min.js"></script>
  <style type="text/css">

       #spectatorDiv {
          position: absolute;
          left:0;
          top: -1000;
      }

      #hmdDiv {
        position: absolute;
        z-index: 100;
        top:0;
        left:0;
      }

     /* #composite {
        position: absolute;
        z-index: -100;
        top:0;
        left:510px;
      }*/
      #composite {
        position: absolute;
        z-index: -100;
        top:0;
        left:321px;
      }


    </style>


</head>

<body>

  <div style="height:240px; width:320px;" id="hmdDiv">

<a-scene embedded firebase="apiKey: AIzaSyAK061tFXbXAM5k56O9E_8k8h9wZycB-I8;
                       authDomain: testaframe.firebaseapp.com;
                       databaseURL: https://testaframe.firebaseio.com;
                       storageBucket: testaframe.appspot.com">

  <a-assets>
    <img id="snowy" src="https://rondagdag.github.io/a-frame-snowman/snowy.jpg">
    <a-mixin id="avatar-head" geometry="primitive: box; depth: 0.1; height: 0.1; width: 0.1" material="color: #222"></a-mixin>

    <a-mixin id="avatar-hand" geometry="primitive: box; depth: 0.005; height: 0.005; width: 0.005" material="color: #222"></a-mixin>
    <a-mixin id="snowball" geometry="primitive: sphere; radius: 0.4;" material="color: #FFFFFF">
    </a-mixin>
  </a-assets>

  <a-entity id='leftController'>
    <a-entity id='left' mixin="avatar-hand">

    </a-entity>
  </a-entity>
  </a-entity>
  <a-entity id='rightController'>
    <a-entity id='right' mixin="avatar-hand">

    </a-entity>
  </a-entity>
  <a-entity position="-1.48 -0.6 0.90">
    <a-camera id="head" mixin="avatar-head" wasd-controls fov="68.5" look-controls="hmdEnabled:true;" active="true" spectator="fps:30; 
                             specDiv:#spectatorDiv; 
                             camVideo:#videoElement; 
                             compDiv:#composite;
                             gaussBlur:true">
    </a-camera>
  </a-entity>

  <a-entity position="0 2.25 -15" particle-system="preset: snow">
  </a-entity>

  <a-entity static-body position='0 1 -3'>");
    <a-sphere class='sphere' static-body position="0 0 -5" radius="2" material="shader: standard; color: #fff; metalness: 0; roughness: 1"></a-sphere>
    <a-sphere class='sphere' static-body position="0 2 -5" radius="1.7" material="shader: standard; color: #fff; metalness: 0; roughness: 1"></a-sphere>
    <a-sphere class='sphere' static-body position="0 4 -5" radius="1.3" material="shader: standard; color: #fff; metalness: 0; roughness: 1"></a-sphere>
    <a-sphere class='sphere' static-body position="-0.4 4.3 -3.75" radius="0.2" material="shader: standard; color: #000; metalness: 0; roughness: 1"></a-sphere>
    <a-sphere class='sphere' static-body position="0.4 4.3 -3.75" radius="0.2" material="shader: standard; color: #000; metalness: 0; roughness: 1"></a-sphere>
    <a-cone static-body position="0 4 -3.38" rotation="90 0 0" radius-bottom="0.2" radius-top="0" material="shader: standard; color: #ce6548"></a-cone>
  </a-entity>");
  <a-plane material="shader: flat; src: #snowy; repeat: 1 0.48" rotation="-90 0 0" width="150" height="50"></a-plane>
  <a-entity geometry="primitive: sphere; radius: 50" material="shader: flat; src: #snowy" rotation="0 40 0" position="0 0 0"
    scale="1 1 -1"></a-entity>
  <a-entity light="type: ambient; color: #405e94"></a-entity>
  <a-entity light="type: directional; color: #FFF; intensity: 0.8" position="5 5 10"></a-entity>

</a-scene>


<div id="spectatorDiv" style="height:240px; width:320px;"></div>

<!-- 640 x 480 -->
<div hidden id="webcam" style="height:480px; width:640px;">
<video autoplay="true" id="videoElement" class="videoInsert" width="640" height="480">
</video>
</div>

<div id="composite" style="height:480px; width:640px;">
</div>




</body>

</html>